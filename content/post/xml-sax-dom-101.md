---
title: "XMLパーサーの Sax と Dom の一長一短について"
slug: xml-sax-dom-101
date: 2021-02-22T18:19:41+09:00
draft: false
author: sakamossan
---

XMLのパーサにはイベントドリブンの方式とオブジェクトベースの2つのやりかたがある

- DOMはオブジェクトベース
- SAXパーサはイベントドリブン

イベントドリブンにxmlをパースする場合は以下のようなイベントで処理をキックすることになる

- タグの開始 `<` や終了 `/> `に当たった時
- エレメントの内容/エンティティーを読み込んだ時
- 構文解析などエラーが発生した時

パーサーは読み込みながらイベントにあたって登録された処理を実行していく


## 一長一短

### DOMパーサ

DOMパーサのほうは、ツリーを生成するためXML文書をすべてメモリに置くことになるので、
文書が1GBとか大きい場合はメモリの使用量が大きくなってしまう。

htmlはメモリを圧迫するほど大きいことがあんまりないのでブラウザではDOMが使われている。

### SAXパーサ

SAXパーサは読んでイベントを生成するだけなのでメモリに置くデータ量が小さくて済む。
しかし、SAXは逆にXMLを読み込んだ位置から前に戻るという操作が出来ない。
上から下に一方向に読んで、読み終わったら処理が終了しているという作りにする必要がある。

UIの操作に応じてXMLを変化させるといった操作に向かないためブラウザではSAXは使われていない。
SAXは巨大なXMLを上から下に読んでいくバッチ処理などで使い所がある。


## 参考

- [強力なAPI、SAX](https://www.ibm.com/developerworks/jp/xml/library/x-saxapi-index/index.html)
