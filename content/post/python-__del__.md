---
title: "pythonの__del__"
slug: python-__del__
date: 2018-11-26T12:21:22+09:00
draft: false
author: sakamossan
---

軽くドキュメントを読んでメモ

次のような雰囲気のメソッドのようだ

- デストラクタとして使わない
- やむおえない時だけ使う
- 変な使い方はしない

### ドキュメントの記載

- [3. データモデル — Python 3.7.1 ドキュメント](https://docs.python.org/ja/3/reference/datamodel.html#object.__del__)

デストラクタ的に`__del__`が定義できる

> インスタンスが破棄されるときに呼び出されます。 これはファイナライザや (適切ではありませんが) デストラクタとも呼ばれます。

ただしインタプリタ終了時に呼ばれるとは限らない

> インタプリタが終了したときに、残存しているオブジェクトの __del__() メソッドが呼び出される保証はありません。

辺な使い方が出来るが推奨されていない

> __del__() メソッドが破棄しようとしているインスタンスへの新しい参照を作り、破棄を送らせることは (推奨されないものの) 可能です。


### リファレンスカウント

こちらの資料だとリファレンスカウントが0になったときに呼ばれると書いてある

- [__del__, gc, 循環参照, weakref](https://emptypage.jp/notes/py-__del__-and-refcycle.html)

> オブジェクトの参照カウントが 0 になったとき、そのオブジェクトの __del__ メソッドが（もし定義されていれば）呼ばれる。その意味で、__del__ メソッドはデストラクタとも呼ばれる。このメソッドで、ファイルハンドルをクローズするとか、メンバ変数として保持していたリソースを解放するといった処理を行うことが想定されている。

ただし、この資料は2010年のもので今(python3)は違うのかもしれない
